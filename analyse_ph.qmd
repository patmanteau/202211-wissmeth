---
title: "Analyse der Framingham Heart Study (Patrick)"
---

# Libraries laden

```{r}
#| warning: false
library(tidyverse)
library(dplyr)
library(mosaic)
```

# Framingham-Daten

Beschreibung des Datensatzes

- Demographic
  - Sex: male or female(Nominal)
  - Age: Age of the patient;(Continuous - Although the recorded ages have been truncated to whole numbers, the concept of age is continuous)
- Behavioral
  - Education: 0: Less than High School and High School degrees, 1: College Degree and Higher
  - Current Smoker: whether or not the patient is a current smoker (Nominal)
  - Cigs Per Day: the number of cigarettes that the person smoked on average in one day. (can be considered continuous as one can have any number of cigarettes, even half a cigarette.)
- Medical(history)
  - BP Meds: whether or not the patient was on blood pressure medication (Nominal)
  - Prevalent Stroke: whether or not the patient had previously had a stroke (Nominal)
  - Prevalent Hyp: whether or not the patient was hypertensive (Nominal)
  - Diabetes: whether or not the patient had diabetes (Nominal)
- Medical(current)
  - Tot Chol: total cholesterol level (Continuous)
  - Sys BP: systolic blood pressure (Continuous)
  - Dia BP: diastolic blood pressure (Continuous)
  - BMI: Body Mass Index (Continuous)
  - Heart Rate: heart rate (Continuous - In medical research, variables such as heart rate though in fact discrete, yet are considered continuous because of large number of possible values.)
  - Glucose: glucose level (Continuous)
- Predict variable (desired target):
  - 10 year risk of coronary heart disease CHD (binary: “1”, means “Yes”, “0” means “No”)

Quelle: [Kaggle](https://www.kaggle.com/datasets/captainozlem/framingham-chd-preprocessed-data)

Daten liegen in `CHD_preprocessed.csv`. Naiv laden:

```{r}
fram <- read_csv(
  "CHD_preprocessed.csv"
)
```

*Problem*: Gibt direkt mal eine ominöse Ausgabe. R erklärt alle Attribute für stetig numerisch (=dbl). Doof.

*Lösung*: Spaltentypen explizit definieren.


```{r}
fram <- read_csv(
  "CHD_preprocessed.csv",
  col_types = list(
    male = col_logical(),
    age = col_integer(),
    education = col_factor(ordered = TRUE),
    currentSmoker = col_logical(),
    cigsPerDay = col_number(),
    BPMeds = col_logical(),
    prevalentStroke = col_logical(),
    prevalentHyp = col_logical(),
    diabetes = col_logical(),
    totChol = col_number(),
    sysBP = col_number(),
    diaBP = col_number(),
    BMI = col_number(),
    heartRate = col_number(),
    glucose = col_number(),
    TenYearCHD = col_logical()
  )
)
fram
problems(fram)
```

**Problem**: `read_csv` gibt eine Warnung aus. `problem(fram)` meldet: Spalte 6 (`BPMeds`) sollte nur `1/0/T/F/TRUE/FALSE` enthalten, enthält aber `0.0`

**Lösung**: BPMeds korrigieren, entweder beim Einlesen oder nachträglich

```{r}
fram <- read_csv(
  "CHD_preprocessed.csv",
  col_types = list(
    male = col_logical(),
    age = col_integer(),
    education = col_factor(ordered = TRUE),
    currentSmoker = col_logical(),
    cigsPerDay = col_number(),
    BPMeds = col_number(), # Erstmal als Number lesen
    prevalentStroke = col_logical(),
    prevalentHyp = col_logical(),
    diabetes = col_logical(),
    totChol = col_number(),
    sysBP = col_number(),
    diaBP = col_number(),
    BMI = col_number(),
    heartRate = col_number(),
    glucose = col_number(),
    TenYearCHD = col_logical()
  )
) |> mutate(BPMeds = if_else(BPMeds == 1.0, TRUE, FALSE)) # dann korrigieren
fram
```

Besser.

